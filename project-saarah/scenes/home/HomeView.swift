//
//  HomeView.swift
//  project-saarah
//
//  Created by Bruno Rocha on 29/09/19.
//  Copyright (c) 2019 Bruno Rocha. All rights reserved.
//
//  This file was generated by the Clean Swift Xcode Templates so
//  you can apply clean architecture to your iOS and Mac projects,
//  see http://clean-swift.com
//

import UIKit

protocol HomeViewDelegate: class {
    func didRequestNavigationTo(nextViewController: UIViewController)
}

class HomeView: UIView {
    private var tableView = SaarahTableView()
    weak var delegate: HomeViewDelegate!

	init() {
		super.init(frame: .zero)

//		translatesAutoresizingMaskIntoConstraints = false
        backgroundColor = AppStyleGuide.Colors.background.uiColor

		instantiateViews()
		buildViewsHierarchy()
		setupConstraints()
	}

	required init?(coder aDecoder: NSCoder) {
		fatalError("init(coder:) has not been implemented")
	}

	func instantiateViews() {
	}

	func buildViewsHierarchy() {
        addSubview(tableView)
        tableView.delegate = self
        tableView.dataSource = self
	}

	func setupConstraints() {
        NSLayoutConstraint.activate([
            tableView.topAnchor.constraint(equalTo: topAnchor),
            tableView.leadingAnchor.constraint(equalTo: leadingAnchor),
            tableView.trailingAnchor.constraint(equalTo: trailingAnchor),
            tableView.bottomAnchor.constraint(equalTo: bottomAnchor)
        ])
	}
}

extension HomeView: UITableViewDelegate, UITableViewDataSource {
    func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
        return 1
    }

    func tableView(_ tableView: UITableView, viewForHeaderInSection section: Int) -> UIView? {
        return EmptySectionHeaderView()
    }

    func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
        let cell = HomeMenuTableViewCell()
        cell.delegate = self
        return cell
    }
}

extension HomeView: HomeMenuDelegate {
    func didSelectHomeMenuOption(_ option: HomeMenuOption) {
        let nextViewController = option.viewController
        delegate?.didRequestNavigationTo(nextViewController: nextViewController)
    }
}
